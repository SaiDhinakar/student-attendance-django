{% extends 'base.html' %}
{% block title %}Dashboard - Student Attendance{% endblock %}
{% block content %}
  <!-- Advisor-Style Welcome Section -->
  <div class="advisor-welcome-section">
    <div class="flex items-center justify-between">
      <div>
        <h1>Welcome back, {{ user.username }}!</h1>
        <p>Here's what's happening with your attendance system today.</p>
        <p class="text-sm mt-2 opacity-90">
          <i class="iconoir-calendar mr-1"></i>{{ "now"|date:"F d, Y" }} - 
          <i class="iconoir-clock mr-1"></i><span id="currentTime">Loading time...</span>
        </p>
      </div>
      <div class="hidden md:block">
        <i class="iconoir-dashboard advisor-welcome-icon"></i>
      </div>
    </div>
  </div>

  <!-- Advisor-Style Stats Cards -->
  <div class="advisor-stats-grid">
    <!-- Total Students -->
    <div class="advisor-stat-card">
      <div class="stat-icon" style="background: var(--gradient-primary);">
        <i class="iconoir-user"></i>
      </div>
      <div class="stat-title">Total Students</div>
      <div class="stat-value">1,234</div>
    </div>

    <!-- Present Today -->
    <div class="advisor-stat-card">
      <div class="stat-icon" style="background: linear-gradient(135deg, #34d399 0%, #10b981 100%);">
        <i class="iconoir-check-circle"></i>
      </div>
      <div class="stat-title">Present Today</div>
      <div class="stat-value">1,156</div>
    </div>

    <!-- Absent Today -->
    <div class="advisor-stat-card">
      <div class="stat-icon" style="background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);">
        <i class="iconoir-cancel"></i>
      </div>
      <div class="stat-title">Absent Today</div>
      <div class="stat-value">78</div>
    </div>

    <!-- Attendance Rate -->
    <div class="advisor-stat-card">
      <div class="stat-icon" style="background: linear-gradient(135deg, #06b6d4 0%, #0891b2 100%);">
        <i class="iconoir-stats-up"></i>
      </div>
      <div class="stat-title">Attendance Rate</div>
      <div class="stat-value">93.7%</div>
    </div>
  </div>

  <!-- Advisor-Style Quick Actions -->
  <div class="advisor-actions-section">
    <h3>
      <i class="iconoir-fast-arrow-right"></i>Quick Actions
    </h3>
    <div class="advisor-actions-grid">
      <!-- Department Management -->
      <div class="advisor-action-card">
        <div class="advisor-action-icon" style="color: var(--primary);">
          <i class="iconoir-building"></i>
        </div>
        <div class="advisor-action-title">Department Management</div>
        <div class="advisor-action-buttons">
          <a href="{% url 'admin:core_department_changelist' %}" class="advisor-action-btn primary">
            <i class="iconoir-eye"></i>View Departments
          </a>
          <a href="{% url 'admin:core_department_add' %}" class="advisor-action-btn secondary">
            <i class="iconoir-plus"></i>Add New Department
          </a>
        </div>
      </div>

      <!-- Student Management -->
      <div class="advisor-action-card">
        <div class="advisor-action-icon" style="color: #10b981;">
          <i class="iconoir-group"></i>
        </div>
        <div class="advisor-action-title">Student Management</div>
        <div class="advisor-action-buttons">
          <a href="{% url 'admin:core_student_changelist' %}" class="advisor-action-btn success">
            <i class="iconoir-user"></i>View Students
          </a>
          <a href="{% url 'admin:core_student_add' %}" class="advisor-action-btn info">
            <i class="iconoir-plus"></i>Add New Student
          </a>
        </div>
      </div>

      <!-- Batch Management -->
      <div class="advisor-action-card">
        <div class="advisor-action-icon" style="color: #f59e0b;">
          <i class="iconoir-user-graduation"></i>
        </div>
        <div class="advisor-action-title">Batch Management</div>
        <div class="advisor-action-buttons">
          <a href="{% url 'admin:core_batch_changelist' %}" class="advisor-action-btn warning">
            <i class="iconoir-group"></i>View Batches
          </a>
          <a href="{% url 'admin:core_batch_add' %}" class="advisor-action-btn purple">
            <i class="iconoir-plus"></i>Add New Batch
          </a>
        </div>
      </div>

      <!-- Subject Management -->
      <div class="advisor-action-card">
        <div class="advisor-action-icon" style="color: #a855f7;">
          <i class="iconoir-book"></i>
        </div>
        <div class="advisor-action-title">Subject Management</div>
        <div class="advisor-action-buttons">
          <a href="{% url 'admin:core_subject_changelist' %}" class="advisor-action-btn purple">
            <i class="iconoir-book"></i>View Subjects
          </a>
          <a href="{% url 'admin:core_subject_add' %}" class="advisor-action-btn primary">
            <i class="iconoir-plus"></i>Add New Subject
          </a>
        </div>
      </div>
    </div>
  </div>

  <!-- Advisor-Style Information Panels -->
  <div class="advisor-info-grid">
    <!-- Recent Activity -->
    <div class="advisor-info-panel">
      <h3>
        <i class="iconoir-activity"></i>Recent Activity
      </h3>
      <div class="space-y-2">
        <div class="advisor-info-item">
          <div class="flex items-center flex-grow">
            <div class="h-8 w-8 bg-gradient-to-r from-green-400 to-green-600 rounded-full flex items-center justify-center mr-3">
              <i class="iconoir-check text-white text-sm"></i>
            </div>
            <div class="flex-grow">
              <div class="advisor-info-label">Attendance marked for CS 3rd Year</div>
              <div class="advisor-info-value">2 hours ago</div>
            </div>
          </div>
        </div>
        <div class="advisor-info-item">
          <div class="flex items-center flex-grow">
            <div class="h-8 w-8 bg-gradient-to-r from-blue-400 to-blue-600 rounded-full flex items-center justify-center mr-3">
              <i class="iconoir-plus text-white text-sm"></i>
            </div>
            <div class="flex-grow">
              <div class="advisor-info-label">New student registered</div>
              <div class="advisor-info-value">4 hours ago</div>
            </div>
          </div>
        </div>
        <div class="advisor-info-item">
          <div class="flex items-center flex-grow">
            <div class="h-8 w-8 bg-gradient-to-r from-yellow-400 to-yellow-600 rounded-full flex items-center justify-center mr-3">
              <i class="iconoir-warning-triangle text-white text-sm"></i>
            </div>
            <div class="flex-grow">
              <div class="advisor-info-label">Low attendance alert sent</div>
              <div class="advisor-info-value">6 hours ago</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- System Overview -->
    <div class="advisor-info-panel">
      <h3>
        <i class="iconoir-settings"></i>System Overview
      </h3>
      <div class="space-y-2">
        <div class="advisor-info-item">
          <div class="advisor-info-label">Total Departments</div>
          <div class="advisor-info-value highlight">8</div>
        </div>
        <div class="advisor-info-item">
          <div class="advisor-info-label">Total Batches</div>
          <div class="advisor-info-value highlight">24</div>
        </div>
        <div class="advisor-info-item">
          <div class="advisor-info-label">Total Subjects</div>
          <div class="advisor-info-value highlight">156</div>
        </div>
        <div class="advisor-info-item">
          <div class="advisor-info-label">System Status</div>
          <div class="advisor-info-value success">Active</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Advisor-Style Overview Cards -->
  <div class="advisor-overview-grid">
    <div class="advisor-overview-card">
      <h4>Today's Summary</h4>
      <p>Classes scheduled: <span class="highlight">12</span></p>
      <p>Total capacity: <span class="highlight">1,234 students</span></p>
      <p>Current attendance: <span class="success">93.7%</span></p>
    </div>

    <div class="advisor-overview-card">
      <h4>This Week Performance</h4>
      <p>Average attendance: <span class="success">92.4%</span></p>
      <p>Classes conducted: <span class="highlight">84</span></p>
      <p>Alerts generated: <span class="warning">3</span></p>
    </div>

    <div class="advisor-overview-card">
      <h4>Quick Access</h4>
      <div class="space-y-2 mt-3">
        <a href="/admin/" class="btn-advisor-primary full-width">
          <i class="iconoir-settings"></i>Admin Panel
        </a>
        <a href="{% url 'logout' %}" class="btn-advisor-secondary full-width">
          <i class="iconoir-log-out"></i>Logout
        </a>
      </div>
    </div>
  </div>

  <!-- JavaScript for Real-time Clock -->
  <script>
    function updateTime() {
      const now = new Date();
      const timeString = now.toLocaleTimeString('en-US', {
        hour: '2-digit',
        minute: '2-digit',
        second: '2-digit',
        hour12: true
      });
      const timeElement = document.getElementById('currentTime');
      if (timeElement) {
        timeElement.textContent = timeString;
      }
    }
    
    // Update time immediately and then every second
    updateTime();
    setInterval(updateTime, 1000);
  </script>

  <style>
    .full-width {
      width: 100%;
      justify-content: center;
    }
  </style>
{% endblock %}
